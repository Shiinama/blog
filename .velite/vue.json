[
  {
    "slug": "/content/vue/1.vue_array_responsive",
    "title": "1. vue2究竟对数组做响应式了吗",
    "description": "一部分是对属性的响应式，一部分是下标的效应式",
    "published": true,
    "date": "2022-12-01T00:00:00.000Z",
    "body": "const{Fragment:l,jsx:n,jsxs:e}=arguments[0];function _createMdxContent(r){const c={a:\"a\",code:\"code\",figure:\"figure\",h1:\"h1\",p:\"p\",pre:\"pre\",span:\"span\",...r.components};return e(l,{children:[e(c.h1,{id:\"vue2究竟对数组做响应式了吗\",children:[n(c.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#vue2究竟对数组做响应式了吗\",children:n(c.span,{className:\"icon icon-link\"})}),\"vue2究竟对数组做响应式了吗\"]}),\"\\n\",e(c.h1,{id:\"开始\",children:[n(c.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#开始\",children:n(c.span,{className:\"icon icon-link\"})}),\"开始\"]}),\"\\n\",n(c.p,{children:\"经常呀有面试官问，vue2的数组响应式的问题，但其实我觉得这个问题可以拆分成2部分，一部分是对属性的响应式，一部分是下标的效应式。我们那还是直接看源码把，对应版本2.7。\"}),\"\\n\",e(c.h1,{id:\"源码实现\",children:[n(c.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#源码实现\",children:n(c.span,{className:\"icon icon-link\"})}),\"源码实现\"]}),\"\\n\",n(c.p,{children:\"Observe实现\"}),\"\\n\",n(c.figure,{\"data-rehype-pretty-code-figure\":\"\",children:n(c.pre,{style:{backgroundColor:\"#17191e\",color:\"#eef0f9\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"houston\",children:e(c.code,{\"data-language\":\"js\",\"data-theme\":\"houston\",style:{display:\"grid\"},children:[n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"//路径src\\\\core\\\\observer\\\\index.ts\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"export\"}),n(c.span,{style:{color:\"#54B9FF\"},children:\" class\"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\" Observer\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#4BF3C8\"},children:\"  dep\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\": \"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\"Dep\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#4BF3C8\"},children:\"  vmCount\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\": \"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\"number\"}),n(c.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\" // number of vms that have this object as root $data\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"  constructor\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(c.span,{style:{color:\"#54B9FF\"},children:\"public\"}),n(c.span,{style:{color:\"#4BF3C8\",fontStyle:\"italic\"},children:\" value\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\": \"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\"any\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\", \"}),n(c.span,{style:{color:\"#54B9FF\"},children:\"public\"}),n(c.span,{style:{color:\"#4BF3C8\",fontStyle:\"italic\"},children:\" shallow\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),n(c.span,{style:{color:\"#FFD493\"},children:\"false\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\", \"}),n(c.span,{style:{color:\"#54B9FF\"},children:\"public\"}),n(c.span,{style:{color:\"#4BF3C8\",fontStyle:\"italic\"},children:\" mock\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),n(c.span,{style:{color:\"#FFD493\"},children:\"false\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\") {\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"    // this.value = value\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#ACAFFF\"},children:\"    this\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"dep\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"mock\"}),n(c.span,{style:{color:\"#54B9FF\"},children:\" ?\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\" mockDep\"}),n(c.span,{style:{color:\"#54B9FF\"},children:\" :\"}),n(c.span,{style:{color:\"#54B9FF\"},children:\" new\"}),n(c.span,{style:{color:\"#00DAEF\"},children:\" Dep\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"()\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#ACAFFF\"},children:\"    this\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"vmCount\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),n(c.span,{style:{color:\"#FFD493\"},children:\"0\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#00DAEF\"},children:\"    def\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"value\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\", \"}),n(c.span,{style:{color:\"#FFD493\"},children:\"'__ob__'\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\", \"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\"this\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\")\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"    //处理数组\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"    if\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" (\"}),n(c.span,{style:{color:\"#00DAEF\"},children:\"isArray\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"value\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\")) {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"      if\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" (!\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"mock\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\") {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"        if\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" (\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"hasProto\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\") {\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"          // 重写数组原型方法\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"          /* eslint-disable no-proto */\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#EEF0F9\"},children:\"          ;(\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"value\"}),n(c.span,{style:{color:\"#54B9FF\"},children:\" as\"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\" any\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\").\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"__proto__\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"arrayMethods\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"          /* eslint-enable no-proto */\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#EEF0F9\"},children:\"        } \"}),n(c.span,{style:{color:\"#54B9FF\"},children:\"else\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"          for\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" (\"}),n(c.span,{style:{color:\"#54B9FF\"},children:\"let\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\" i\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),n(c.span,{style:{color:\"#FFD493\"},children:\"0\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\", \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"l\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"arrayKeys\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"length\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"; \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"i\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" < \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"l\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"; \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"i\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"++) {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"            const\"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\" key\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"arrayKeys\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"[\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"i\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"]\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#00DAEF\"},children:\"            def\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"value\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\", \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"key\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\", \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"arrayMethods\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"[\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"key\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"])\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F9\"},children:\"          }\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F9\"},children:\"        }\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F9\"},children:\"      }\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"      if\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" (!\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"shallow\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\") {\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"        // 对数组里的元素的值监听，却不监听下标\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#ACAFFF\"},children:\"        this\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#00DAEF\"},children:\"observeArray\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"value\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\")\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F9\"},children:\"      }\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#EEF0F9\"},children:\"    } \"}),n(c.span,{style:{color:\"#54B9FF\"},children:\"else\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" {\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"      /**\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"       * Walk through all properties and convert them into\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"       * getter/setters. This method should only be called when\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"       * value type is Object.\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"       */\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"      // 对对象遍历所有键值\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"      const\"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\" keys\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"Object\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#00DAEF\"},children:\"keys\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"value\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\")\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"      for\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" (\"}),n(c.span,{style:{color:\"#54B9FF\"},children:\"let\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\" i\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),n(c.span,{style:{color:\"#FFD493\"},children:\"0\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"; \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"i\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" < \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"keys\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"length\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"; \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"i\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"++) {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"        const\"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\" key\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"keys\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"[\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"i\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"]\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#00DAEF\"},children:\"        defineReactive\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"value\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\", \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"key\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\", \"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\"NO_INIITIAL_VALUE\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\", \"}),n(c.span,{style:{color:\"#FFD493\"},children:\"undefined\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\", \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"shallow\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\", \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"mock\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\")\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F9\"},children:\"      }\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F9\"},children:\"    }\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F9\"},children:\"  }\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"  /**\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"   * Observe a list of Array items.\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"   */\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"  // 对应到这\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#00DAEF\"},children:\"  observeArray\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(c.span,{style:{color:\"#4BF3C8\",fontStyle:\"italic\"},children:\"value\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\": \"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\"any\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"[]) {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"    for\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" (\"}),n(c.span,{style:{color:\"#54B9FF\"},children:\"let\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\" i\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),n(c.span,{style:{color:\"#FFD493\"},children:\"0\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\", \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"l\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"value\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"length\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"; \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"i\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" < \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"l\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"; \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"i\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"++) {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#00DAEF\"},children:\"      observe\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"value\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"[\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"i\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"], \"}),n(c.span,{style:{color:\"#FFD493\"},children:\"false\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\", \"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\"this\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"mock\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\")\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F9\"},children:\"    }\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F9\"},children:\"  }\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F9\"},children:\"}\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:\" \"})]})})}),\"\\n\",n(c.p,{children:\"这里告诉我们什么那，就是比如你this.arr = xxx的时候，他就会直接给数组里每一项元素添加监听，但并不会给下标添加监听，而对象就直接遍历所有的属性去添加监听了，接下来我们看看重写操作做了点啥。\"}),\"\\n\",n(c.figure,{\"data-rehype-pretty-code-figure\":\"\",children:n(c.pre,{style:{backgroundColor:\"#17191e\",color:\"#eef0f9\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"houston\",children:e(c.code,{\"data-language\":\"js\",\"data-theme\":\"houston\",style:{display:\"grid\"},children:[e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"const\"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\" arrayProto\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\"Array\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"prototype\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"export\"}),n(c.span,{style:{color:\"#54B9FF\"},children:\" const\"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\" arrayMethods\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"Object\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#00DAEF\"},children:\"create\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"arrayProto\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\")\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"const\"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\" methodsToPatch\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" = [\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#FFD493\"},children:\"  'push'\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\",\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#FFD493\"},children:\"  'pop'\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\",\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#FFD493\"},children:\"  'shift'\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\",\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#FFD493\"},children:\"  'unshift'\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\",\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#FFD493\"},children:\"  'splice'\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\",\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#FFD493\"},children:\"  'sort'\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\",\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#FFD493\"},children:\"  'reverse'\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F9\"},children:\"]\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"/**\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\" * Intercept mutating methods and emit events\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\" */\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#4BF3C8\"},children:\"methodsToPatch\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#00DAEF\"},children:\"forEach\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(c.span,{style:{color:\"#54B9FF\"},children:\"function\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" (\"}),n(c.span,{style:{color:\"#4BF3C8\",fontStyle:\"italic\"},children:\"method\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\") {\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"  // cache original method\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"  const\"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\" original\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"arrayProto\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"[\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"method\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"]\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#00DAEF\"},children:\"  def\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"arrayMethods\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\", \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"method\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\", \"}),n(c.span,{style:{color:\"#54B9FF\"},children:\"function\"}),n(c.span,{style:{color:\"#00DAEF\"},children:\" mutator\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(...\"}),n(c.span,{style:{color:\"#4BF3C8\",fontStyle:\"italic\"},children:\"args\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\") {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"    const\"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\" result\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"original\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#00DAEF\"},children:\"apply\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\"this\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\", \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"args\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\")\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"    const\"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\" ob\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\"this\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"__ob__\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"    let\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\" inserted\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"    switch\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" (\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"method\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\") {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"      case\"}),n(c.span,{style:{color:\"#FFD493\"},children:\" 'push'\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\":\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"      case\"}),n(c.span,{style:{color:\"#FFD493\"},children:\" 'unshift'\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\":\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#4BF3C8\"},children:\"        inserted\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"args\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#54B9FF\"},children:\"        break\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"      case\"}),n(c.span,{style:{color:\"#FFD493\"},children:\" 'splice'\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\":\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#4BF3C8\"},children:\"        inserted\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"args\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#00DAEF\"},children:\"slice\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(c.span,{style:{color:\"#FFD493\"},children:\"2\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\")\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#54B9FF\"},children:\"        break\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F9\"},children:\"    }\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"    //关注这里就行\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"    if\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" (\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"inserted\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\") \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"ob\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#00DAEF\"},children:\"observeArray\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"inserted\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\")\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"    // notify change\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"    if\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" (\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"__DEV__\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\") {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#4BF3C8\"},children:\"      ob\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"dep\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#00DAEF\"},children:\"notify\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"({\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#4BF3C8\"},children:\"        type\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\": \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"TriggerOpTypes\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\"ARRAY_MUTATION\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\",\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#4BF3C8\"},children:\"        target\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\": \"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\"this\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\",\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#4BF3C8\"},children:\"        key\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\": \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"method\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F9\"},children:\"      })\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#EEF0F9\"},children:\"    } \"}),n(c.span,{style:{color:\"#54B9FF\"},children:\"else\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#4BF3C8\"},children:\"      ob\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"dep\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#00DAEF\"},children:\"notify\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"()\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F9\"},children:\"    }\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"    return\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\" result\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F9\"},children:\"  })\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F9\"},children:\"})\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:\" \"})]})})}),\"\\n\",n(c.p,{children:\"这段代码也很简单，就是给每个新增的元素添加一个响应式，def去重新defineProperty最后重新返回的是一个writable,configurable都为true的对象。\"}),\"\\n\",n(c.p,{children:\"emm,有点跑题，问题的关键应该还是为啥不给数组下标做响应式，要做肯定是可以做的，犹大的解释性能问题，这里我们可以曲线救国从一个方面来解释他。\"}),\"\\n\",n(c.figure,{\"data-rehype-pretty-code-figure\":\"\",children:n(c.pre,{style:{backgroundColor:\"#17191e\",color:\"#eef0f9\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"houston\",children:e(c.code,{\"data-language\":\"js\",\"data-theme\":\"houston\",style:{display:\"grid\"},children:[e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"function\"}),n(c.span,{style:{color:\"#00DAEF\"},children:\" defineReactive\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(c.span,{style:{color:\"#4BF3C8\",fontStyle:\"italic\"},children:\"data\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\", \"}),n(c.span,{style:{color:\"#4BF3C8\",fontStyle:\"italic\"},children:\"key\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\", \"}),n(c.span,{style:{color:\"#4BF3C8\",fontStyle:\"italic\"},children:\"value\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\") {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#4BF3C8\"},children:\"\\t Object\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#00DAEF\"},children:\"defineProperty\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"data\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\", \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"key\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\", {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#4BF3C8\"},children:\"\\t\\t enumerable\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\": \"}),n(c.span,{style:{color:\"#FFD493\"},children:\"true\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\",\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#4BF3C8\"},children:\"\\t\\t configurable\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\": \"}),n(c.span,{style:{color:\"#FFD493\"},children:\"true\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\",\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#00DAEF\"},children:\"\\t\\t get\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\": \"}),n(c.span,{style:{color:\"#54B9FF\"},children:\"function\"}),n(c.span,{style:{color:\"#00DAEF\"},children:\" defineGet\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"() {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#4BF3C8\"},children:\"\\t\\t\\t console\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#00DAEF\"},children:\"log\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(c.span,{style:{color:\"#FFD493\"},children:\"`get key: \"}),n(c.span,{style:{color:\"#54B9FF\"},children:\"${\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"key\"}),n(c.span,{style:{color:\"#54B9FF\"},children:\"}\"}),n(c.span,{style:{color:\"#FFD493\"},children:\" value: \"}),n(c.span,{style:{color:\"#54B9FF\"},children:\"${\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"value\"}),n(c.span,{style:{color:\"#54B9FF\"},children:\"}\"}),n(c.span,{style:{color:\"#FFD493\"},children:\"`\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\")\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"\\t\\t\\t return\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\" value\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F9\"},children:\"\\t\\t },\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#00DAEF\"},children:\"\\t\\t set\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\": \"}),n(c.span,{style:{color:\"#54B9FF\"},children:\"function\"}),n(c.span,{style:{color:\"#00DAEF\"},children:\" defineSet\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(c.span,{style:{color:\"#4BF3C8\",fontStyle:\"italic\"},children:\"newVal\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\") {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#4BF3C8\"},children:\"\\t\\t\\t console\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#00DAEF\"},children:\"log\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(c.span,{style:{color:\"#FFD493\"},children:\"`set key: \"}),n(c.span,{style:{color:\"#54B9FF\"},children:\"${\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"key\"}),n(c.span,{style:{color:\"#54B9FF\"},children:\"}\"}),n(c.span,{style:{color:\"#FFD493\"},children:\" value: \"}),n(c.span,{style:{color:\"#54B9FF\"},children:\"${\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"newVal\"}),n(c.span,{style:{color:\"#54B9FF\"},children:\"}\"}),n(c.span,{style:{color:\"#FFD493\"},children:\"`\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\")\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#4BF3C8\"},children:\"\\t\\t\\t value\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"newVal\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F9\"},children:\"\\t\\t }\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F9\"},children:\"\\t })\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F9\"},children:\"}\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F9\"},children:\" \"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"function\"}),n(c.span,{style:{color:\"#00DAEF\"},children:\" observe\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(c.span,{style:{color:\"#4BF3C8\",fontStyle:\"italic\"},children:\"data\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\") {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#4BF3C8\"},children:\"\\tObject\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#00DAEF\"},children:\"keys\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"data\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\").\"}),n(c.span,{style:{color:\"#00DAEF\"},children:\"forEach\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(c.span,{style:{color:\"#54B9FF\"},children:\"function\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(c.span,{style:{color:\"#4BF3C8\",fontStyle:\"italic\"},children:\"key\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\") {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#00DAEF\"},children:\"\\t\\tdefineReactive\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"data\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\", \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"key\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\", \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"data\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"[\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"key\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"])\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F9\"},children:\"\\t})\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F9\"},children:\"}\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F9\"},children:\" \"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"let\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\" arr\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" = [\"}),n(c.span,{style:{color:\"#FFD493\"},children:\"1\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\", \"}),n(c.span,{style:{color:\"#FFD493\"},children:\"2\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\", \"}),n(c.span,{style:{color:\"#FFD493\"},children:\"3\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"]\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#00DAEF\"},children:\"observe\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"arr\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\")\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#4BF3C8\"},children:\"arr\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#00DAEF\"},children:\"shift\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"();\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"//打印结果\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#EEF0F9\"},children:\"VM183:\"}),n(c.span,{style:{color:\"#FFD493\"},children:\"6\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\" get\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" key: \"}),n(c.span,{style:{color:\"#FFD493\"},children:\"0\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" value: \"}),n(c.span,{style:{color:\"#FFD493\"},children:\"1\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#EEF0F9\"},children:\"VM183:\"}),n(c.span,{style:{color:\"#FFD493\"},children:\"6\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\" get\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" key: \"}),n(c.span,{style:{color:\"#FFD493\"},children:\"1\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" value: \"}),n(c.span,{style:{color:\"#FFD493\"},children:\"2\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#EEF0F9\"},children:\"VM183:\"}),n(c.span,{style:{color:\"#FFD493\"},children:\"10\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\" set\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" key: \"}),n(c.span,{style:{color:\"#FFD493\"},children:\"0\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" value: \"}),n(c.span,{style:{color:\"#FFD493\"},children:\"2\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#EEF0F9\"},children:\"VM183:\"}),n(c.span,{style:{color:\"#FFD493\"},children:\"6\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\" get\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" key: \"}),n(c.span,{style:{color:\"#FFD493\"},children:\"2\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" value: \"}),n(c.span,{style:{color:\"#FFD493\"},children:\"3\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#EEF0F9\"},children:\"VM183:\"}),n(c.span,{style:{color:\"#FFD493\"},children:\"10\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\" set\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" key: \"}),n(c.span,{style:{color:\"#FFD493\"},children:\"1\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" value: \"}),n(c.span,{style:{color:\"#FFD493\"},children:\"3\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#4BF3C8\"},children:\"arr\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#00DAEF\"},children:\"unshift\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(c.span,{style:{color:\"#FFD493\"},children:\"7\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\")\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"//打印结果\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#EEF0F9\"},children:\"VM183:\"}),n(c.span,{style:{color:\"#FFD493\"},children:\"6\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\" get\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" key: \"}),n(c.span,{style:{color:\"#FFD493\"},children:\"1\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" value: \"}),n(c.span,{style:{color:\"#FFD493\"},children:\"3\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#EEF0F9\"},children:\"VM183:\"}),n(c.span,{style:{color:\"#FFD493\"},children:\"6\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\" get\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" key: \"}),n(c.span,{style:{color:\"#FFD493\"},children:\"0\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" value: \"}),n(c.span,{style:{color:\"#FFD493\"},children:\"2\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#EEF0F9\"},children:\"VM183:\"}),n(c.span,{style:{color:\"#FFD493\"},children:\"10\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\" set\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" key: \"}),n(c.span,{style:{color:\"#FFD493\"},children:\"1\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" value: \"}),n(c.span,{style:{color:\"#FFD493\"},children:\"2\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#EEF0F9\"},children:\"VM183:\"}),n(c.span,{style:{color:\"#FFD493\"},children:\"10\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\" set\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" key: \"}),n(c.span,{style:{color:\"#FFD493\"},children:\"0\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" value: \"}),n(c.span,{style:{color:\"#FFD493\"},children:\"7\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:\" \"})]})})}),\"\\n\",n(c.p,{children:\"简单明了把,O(n)的复杂度了，我感觉犹大说的性能问题，可能就是一些会操作到索引的操作造成的把，当然他也把那些会操作到索引的数组方法重写了一下，也就是说O(1)的复杂度。\"}),\"\\n\",e(c.h1,{id:\"总结\",children:[n(c.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#总结\",children:n(c.span,{className:\"icon icon-link\"})}),\"总结\"]}),\"\\n\",n(c.p,{children:\"最近在看和写react的源码，以后react一篇，vue一篇，主要是vue感觉大伙都挺熟的了，不知道写啥，这两个底层工具框架确实react更有难度一些。\"})]})}return{default:function(l={}){const{wrapper:e}=l.components||{};return e?n(e,{...l,children:n(_createMdxContent,{...l})}):_createMdxContent(l)}};",
    "toc": {
      "content": [
        {
          "title": "vue2究竟对数组做响应式了吗",
          "url": "#vue2究竟对数组做响应式了吗",
          "items": []
        },
        {
          "title": "开始",
          "url": "#开始",
          "items": []
        },
        {
          "title": "源码实现",
          "url": "#源码实现",
          "items": []
        },
        {
          "title": "总结",
          "url": "#总结",
          "items": []
        }
      ],
      "visible": true
    },
    "slugAsParams": "1.vue_array_responsive"
  },
  {
    "slug": "/content/vue/2.vue3_ellnput",
    "title": "2. vue3+ElInput无法输入的问题",
    "description": "vue3+ElInput无法输入的问题",
    "published": true,
    "date": "2022-12-02T00:00:00.000Z",
    "body": "const{Fragment:l,jsx:n,jsxs:e}=arguments[0];function _createMdxContent(a){const r={a:\"a\",code:\"code\",figure:\"figure\",h1:\"h1\",h2:\"h2\",img:\"img\",p:\"p\",pre:\"pre\",span:\"span\",...a.components};return e(l,{children:[e(r.h1,{id:\"vue3elinput无法输入的问题\",children:[n(r.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#vue3elinput无法输入的问题\",children:n(r.span,{className:\"icon icon-link\"})}),\"vue3+ElInput无法输入的问题\"]}),\"\\n\",e(r.h1,{id:\"开篇\",children:[n(r.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#开篇\",children:n(r.span,{className:\"icon icon-link\"})}),\"开篇\"]}),\"\\n\",n(r.p,{children:\"写业务的时候发现，因为想偷懒嘛，直接就在想在外部去定义一个变量，然后写个弹窗里（tsx）的el-input，而不是又去写个vue页面，但发现就输入不了了，而且跟着文档写textarea没有字数统计。就两个问题嘛\"}),\"\\n\",n(r.p,{children:n(r.img,{src:\"https://ik.imagekit.io/leiakito/Vue3+ELLnput/1.jpeg\",alt:\"image.png\"})}),\"\\n\",e(r.h2,{id:\"1el-input无法输入\",children:[n(r.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#1el-input无法输入\",children:n(r.span,{className:\"icon icon-link\"})}),\"1.el-input无法输入\"]}),\"\\n\",n(r.p,{children:\"TSX的写法嘛，最开始我是这么写的\"}),\"\\n\",n(r.figure,{\"data-rehype-pretty-code-figure\":\"\",children:n(r.pre,{style:{backgroundColor:\"#17191e\",color:\"#eef0f9\"},tabIndex:\"0\",\"data-language\":\"ts\",\"data-theme\":\"houston\",children:e(r.code,{\"data-language\":\"ts\",\"data-theme\":\"houston\",style:{display:\"grid\"},children:[e(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#54B9FF\"},children:\"  const\"}),n(r.span,{style:{color:\"#ACAFFF\"},children:\" auditText\"}),n(r.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),n(r.span,{style:{color:\"#00DAEF\"},children:\"ref\"}),n(r.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(r.span,{style:{color:\"#FFD493\"},children:\"''\"}),n(r.span,{style:{color:\"#EEF0F9\"},children:\");\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:n(r.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"  // 忽略代码\"})}),\"\\n\",e(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#EEF0F9\"},children:\"  <\"}),n(r.span,{style:{color:\"#4BF3C8\"},children:\"ElInput\"})]}),\"\\n\",e(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#4BF3C8\"},children:\"    model\"}),n(r.span,{style:{color:\"#EEF0F9\"},children:\"-\"}),n(r.span,{style:{color:\"#4BF3C8\"},children:\"value\"}),n(r.span,{style:{color:\"#EEF0F9\"},children:\"={auditText.\"}),n(r.span,{style:{color:\"#4BF3C8\"},children:\"value\"}),n(r.span,{style:{color:\"#EEF0F9\"},children:\"}\"})]}),\"\\n\",e(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#4BF3C8\"},children:\"    autosize\"}),n(r.span,{style:{color:\"#EEF0F9\"},children:\"={{ minRows: \"}),n(r.span,{style:{color:\"#FFD493\"},children:\"5\"}),n(r.span,{style:{color:\"#EEF0F9\"},children:\", maxRows: \"}),n(r.span,{style:{color:\"#FFD493\"},children:\"10\"}),n(r.span,{style:{color:\"#EEF0F9\"},children:\" }}\"})]}),\"\\n\",e(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#4BF3C8\"},children:\"    max\"}),n(r.span,{style:{color:\"#EEF0F9\"},children:\"-\"}),n(r.span,{style:{color:\"#4BF3C8\"},children:\"length\"}),n(r.span,{style:{color:\"#EEF0F9\"},children:\"={\"}),n(r.span,{style:{color:\"#FFD493\"},children:\"50\"}),n(r.span,{style:{color:\"#EEF0F9\"},children:\"}\"})]}),\"\\n\",e(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#4BF3C8\"},children:\"    placeholder\"}),n(r.span,{style:{color:\"#EEF0F9\"},children:\"=\"}),n(r.span,{style:{color:\"#FFD493\"},children:'\"请填写审核不通过原因（最少五个字）\"'})]}),\"\\n\",e(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#4BF3C8\"},children:\"    show\"}),n(r.span,{style:{color:\"#EEF0F9\"},children:\"-\"}),n(r.span,{style:{color:\"#4BF3C8\"},children:\"word\"}),n(r.span,{style:{color:\"#EEF0F9\"},children:\"-\"}),n(r.span,{style:{color:\"#4BF3C8\"},children:\"limit\"})]}),\"\\n\",e(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#4BF3C8\"},children:\"    type\"}),n(r.span,{style:{color:\"#EEF0F9\"},children:\"=\"}),n(r.span,{style:{color:\"#FFD493\"},children:'\"textarea\"'})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:n(r.span,{style:{color:\"#EEF0F9\"},children:\"  />\"})}),\"\\n\",n(r.span,{\"data-line\":\"\",children:\" \"})]})})}),\"\\n\",n(r.p,{children:\"然后发现真是一点反应没有啊，然后看了下文档上面的这句话\"}),\"\\n\",n(r.p,{children:n(r.img,{src:\"https://ik.imagekit.io/leiakito/Vue3+ELLnput/2.jpeg\",alt:\"image.png\"})}),\"\\n\",n(r.figure,{\"data-rehype-pretty-code-figure\":\"\",children:n(r.pre,{style:{backgroundColor:\"#17191e\",color:\"#eef0f9\"},tabIndex:\"0\",\"data-language\":\"ts\",\"data-theme\":\"houston\",children:e(r.code,{\"data-language\":\"ts\",\"data-theme\":\"houston\",style:{display:\"grid\"},children:[e(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#54B9FF\"},children:\"const\"}),n(r.span,{style:{color:\"#ACAFFF\"},children:\" auditText\"}),n(r.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),n(r.span,{style:{color:\"#00DAEF\"},children:\"ref\"}),n(r.span,{style:{color:\"#EEF0F9\"},children:\"<\"}),n(r.span,{style:{color:\"#ACAFFF\"},children:\"string\"}),n(r.span,{style:{color:\"#EEF0F9\"},children:\">(\"}),n(r.span,{style:{color:\"#FFD493\"},children:\"''\"}),n(r.span,{style:{color:\"#EEF0F9\"},children:\");\"})]}),\"\\n\",e(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#54B9FF\"},children:\"function\"}),n(r.span,{style:{color:\"#00DAEF\"},children:\" test\"}),n(r.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(r.span,{style:{color:\"#4BF3C8\",fontStyle:\"italic\"},children:\"value\"}),n(r.span,{style:{color:\"#EEF0F9\"},children:\") {\"})]}),\"\\n\",e(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#4BF3C8\"},children:\"    console\"}),n(r.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(r.span,{style:{color:\"#00DAEF\"},children:\"log\"}),n(r.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(r.span,{style:{color:\"#4BF3C8\"},children:\"value\"}),n(r.span,{style:{color:\"#EEF0F9\"},children:\");\"})]}),\"\\n\",e(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#4BF3C8\"},children:\"    auditText\"}),n(r.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(r.span,{style:{color:\"#4BF3C8\"},children:\"value\"}),n(r.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),n(r.span,{style:{color:\"#4BF3C8\"},children:\"value\"}),n(r.span,{style:{color:\"#EEF0F9\"},children:\";\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:n(r.span,{style:{color:\"#EEF0F9\"},children:\"}\"})}),\"\\n\",n(r.span,{\"data-line\":\"\",children:n(r.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"//忽略代码\"})}),\"\\n\",e(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#EEF0F9\"},children:\"<\"}),n(r.span,{style:{color:\"#4BF3C8\"},children:\"ElInput\"})]}),\"\\n\",e(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#4BF3C8\"},children:\"    model\"}),n(r.span,{style:{color:\"#EEF0F9\"},children:\"-\"}),n(r.span,{style:{color:\"#4BF3C8\"},children:\"value\"}),n(r.span,{style:{color:\"#EEF0F9\"},children:\"={auditText.\"}),n(r.span,{style:{color:\"#4BF3C8\"},children:\"value\"}),n(r.span,{style:{color:\"#EEF0F9\"},children:\"}\"})]}),\"\\n\",e(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#4BF3C8\"},children:\"    onInput\"}),n(r.span,{style:{color:\"#EEF0F9\"},children:\"={\"}),n(r.span,{style:{color:\"#4BF3C8\"},children:\"test\"}),n(r.span,{style:{color:\"#EEF0F9\"},children:\"}\"})]}),\"\\n\",e(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#4BF3C8\"},children:\"    autosize\"}),n(r.span,{style:{color:\"#EEF0F9\"},children:\"={{ minRows: \"}),n(r.span,{style:{color:\"#FFD493\"},children:\"5\"}),n(r.span,{style:{color:\"#EEF0F9\"},children:\", maxRows: \"}),n(r.span,{style:{color:\"#FFD493\"},children:\"10\"}),n(r.span,{style:{color:\"#EEF0F9\"},children:\" }}\"})]}),\"\\n\",e(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#4BF3C8\"},children:\"    max\"}),n(r.span,{style:{color:\"#EEF0F9\"},children:\"-\"}),n(r.span,{style:{color:\"#4BF3C8\"},children:\"length\"}),n(r.span,{style:{color:\"#EEF0F9\"},children:\"={\"}),n(r.span,{style:{color:\"#FFD493\"},children:\"50\"}),n(r.span,{style:{color:\"#EEF0F9\"},children:\"}\"})]}),\"\\n\",e(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#4BF3C8\"},children:\"    placeholder\"}),n(r.span,{style:{color:\"#EEF0F9\"},children:\"=\"}),n(r.span,{style:{color:\"#FFD493\"},children:'\"请填写审核不通过原因（最少五个字）\"'})]}),\"\\n\",e(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#4BF3C8\"},children:\"    show\"}),n(r.span,{style:{color:\"#EEF0F9\"},children:\"-\"}),n(r.span,{style:{color:\"#4BF3C8\"},children:\"word\"}),n(r.span,{style:{color:\"#EEF0F9\"},children:\"-\"}),n(r.span,{style:{color:\"#4BF3C8\"},children:\"limit\"})]}),\"\\n\",e(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#4BF3C8\"},children:\"    type\"}),n(r.span,{style:{color:\"#EEF0F9\"},children:\"=\"}),n(r.span,{style:{color:\"#FFD493\"},children:'\"textarea\"'})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:n(r.span,{style:{color:\"#EEF0F9\"},children:\"/>\"})}),\"\\n\",n(r.span,{\"data-line\":\"\",children:\" \"})]})})}),\"\\n\",e(r.p,{children:[n(r.img,{src:\"https://ik.imagekit.io/leiakito/Vue3+ELLnput/3.jpeg\",alt:\"image.png\"}),\"\\n但是那其实也不用这么麻烦人文档里也写得很清楚了\",n(r.code,{children:\"v-model\"}),\"就行\"]}),\"\\n\",n(r.figure,{\"data-rehype-pretty-code-figure\":\"\",children:n(r.pre,{style:{backgroundColor:\"#17191e\",color:\"#eef0f9\"},tabIndex:\"0\",\"data-language\":\"ts\",\"data-theme\":\"houston\",children:e(r.code,{\"data-language\":\"ts\",\"data-theme\":\"houston\",style:{display:\"grid\"},children:[e(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#EEF0F9\"},children:\"<\"}),n(r.span,{style:{color:\"#4BF3C8\"},children:\"ElInput\"})]}),\"\\n\",e(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#4BF3C8\"},children:\"    v\"}),n(r.span,{style:{color:\"#EEF0F9\"},children:\"-\"}),n(r.span,{style:{color:\"#4BF3C8\"},children:\"model\"}),n(r.span,{style:{color:\"#EEF0F9\"},children:\"={auditText.\"}),n(r.span,{style:{color:\"#4BF3C8\"},children:\"value\"}),n(r.span,{style:{color:\"#EEF0F9\"},children:\"}\"})]}),\"\\n\",e(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#4BF3C8\"},children:\"    autosize\"}),n(r.span,{style:{color:\"#EEF0F9\"},children:\"={{ minRows: \"}),n(r.span,{style:{color:\"#FFD493\"},children:\"5\"}),n(r.span,{style:{color:\"#EEF0F9\"},children:\", maxRows: \"}),n(r.span,{style:{color:\"#FFD493\"},children:\"10\"}),n(r.span,{style:{color:\"#EEF0F9\"},children:\" }}\"})]}),\"\\n\",e(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#4BF3C8\"},children:\"    max\"}),n(r.span,{style:{color:\"#EEF0F9\"},children:\"-\"}),n(r.span,{style:{color:\"#4BF3C8\"},children:\"length\"}),n(r.span,{style:{color:\"#EEF0F9\"},children:\"={\"}),n(r.span,{style:{color:\"#FFD493\"},children:\"50\"}),n(r.span,{style:{color:\"#EEF0F9\"},children:\"}\"})]}),\"\\n\",e(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#4BF3C8\"},children:\"    placeholder\"}),n(r.span,{style:{color:\"#EEF0F9\"},children:\"=\"}),n(r.span,{style:{color:\"#FFD493\"},children:'\"请填写审核不通过原因（最少五个字）\"'})]}),\"\\n\",e(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#4BF3C8\"},children:\"    show\"}),n(r.span,{style:{color:\"#EEF0F9\"},children:\"-\"}),n(r.span,{style:{color:\"#4BF3C8\"},children:\"word\"}),n(r.span,{style:{color:\"#EEF0F9\"},children:\"-\"}),n(r.span,{style:{color:\"#4BF3C8\"},children:\"limit\"})]}),\"\\n\",e(r.span,{\"data-line\":\"\",children:[n(r.span,{style:{color:\"#4BF3C8\"},children:\"    type\"}),n(r.span,{style:{color:\"#EEF0F9\"},children:\"=\"}),n(r.span,{style:{color:\"#FFD493\"},children:'\"textarea\"'})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:n(r.span,{style:{color:\"#EEF0F9\"},children:\"/>\"})}),\"\\n\",n(r.span,{\"data-line\":\"\",children:\" \"})]})})}),\"\\n\",e(r.h2,{id:\"2字数统计不见了\",children:[n(r.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#2字数统计不见了\",children:n(r.span,{className:\"icon icon-link\"})}),\"2.字数统计不见了\"]}),\"\\n\",n(r.p,{children:\"先看看官网的写法，定义个maxlength再定义个show-word-limit就有字数统计了\"}),\"\\n\",e(r.p,{children:[n(r.img,{src:\"https://ik.imagekit.io/leiakito/Vue3+ELLnput/4.jpeg\",alt:\"image.png\"}),\" 可是如果我在tsx里按官网这么写会发生什么那\"]}),\"\\n\",e(r.p,{children:[n(r.img,{src:\"https://ik.imagekit.io/leiakito/Vue3+ELLnput/5.jpeg\",alt:\"image.png\"}),\"\\n\",n(r.img,{src:\"https://ik.imagekit.io/leiakito/Vue3+ELLnput/6.jpeg\",alt:\"image.png\"}),\"\\n\",n(r.img,{src:\"https://ik.imagekit.io/leiakito/Vue3+ELLnput/7.jpeg\",alt:\"image.png\"}),\"\\n果然吗,不是props的属性就不用写了,原生事件是直接绑定在attrs上给input标签的，所以写在tsx里会报错，写在模版里不会。暂时就忽略这一行检查把~~~。\"]}),\"\\n\",e(r.h1,{id:\"总结\",children:[n(r.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#总结\",children:n(r.span,{className:\"icon icon-link\"})}),\"总结\"]}),\"\\n\",n(r.p,{children:\"平时会记录一些简单但好玩的问题，水一篇vue，每天一篇vue一篇react。\"})]})}return{default:function(l={}){const{wrapper:e}=l.components||{};return e?n(e,{...l,children:n(_createMdxContent,{...l})}):_createMdxContent(l)}};",
    "toc": {
      "content": [
        {
          "title": "vue3+ElInput无法输入的问题",
          "url": "#vue3elinput无法输入的问题",
          "items": []
        },
        {
          "title": "开篇",
          "url": "#开篇",
          "items": [
            {
              "title": "1.el-input无法输入",
              "url": "#1el-input无法输入",
              "items": []
            },
            {
              "title": "2.字数统计不见了",
              "url": "#2字数统计不见了",
              "items": []
            }
          ]
        },
        {
          "title": "总结",
          "url": "#总结",
          "items": []
        }
      ],
      "visible": true
    },
    "slugAsParams": "2.vue3_ellnput"
  },
  {
    "slug": "/content/vue/3.vue_communication",
    "title": "3.vue2各种通信方式源码的实现方式",
    "description": "vue2各种通信方式源码的实现方式",
    "published": true,
    "date": "2022-12-03T00:00:00.000Z",
    "body": "const{Fragment:l,jsx:n,jsxs:e}=arguments[0];function _createMdxContent(r){const c={a:\"a\",code:\"code\",figure:\"figure\",h1:\"h1\",h2:\"h2\",img:\"img\",p:\"p\",pre:\"pre\",span:\"span\",...r.components};return e(l,{children:[e(c.h1,{id:\"vue2各种通信方式源码的实现方式\",children:[n(c.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#vue2各种通信方式源码的实现方式\",children:n(c.span,{className:\"icon icon-link\"})}),\"vue2各种通信方式源码的实现方式\"]}),\"\\n\",e(c.h1,{id:\"开篇\",children:[n(c.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#开篇\",children:n(c.span,{className:\"icon icon-link\"})}),\"开篇\"]}),\"\\n\",n(c.p,{children:\"就看到讲响应式源码的挺多的，但是好像基本没怎么讲vue2的通信原理的可能是大佬们都觉得因为这块比较简单了，这里我们就去看一下，到底在源码里是怎么去实现通信的，这里暂时把vuex摘出去，bus也摘出去，专注一下vue核心的实现。毕竟算是插件要讲肯定得讲混入时机和插件，单开一章讲（!又有东西可以写了）。\"}),\"\\n\",e(c.h1,{id:\"实例通信\",children:[n(c.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#实例通信\",children:n(c.span,{className:\"icon icon-link\"})}),\"实例通信\"]}),\"\\n\",e(c.p,{children:[\"什么是实例通信，意思就是我们平时会用到一些\",n(c.code,{children:\"this.$refs['xxx']\"}),\"的写法去拿到组件中的一些方法或者数据进行回调或者操作，还有一些\",n(c.code,{children:\"$children\"}),\"、\",n(c.code,{children:\"$parent\"}),\"的实例对象。\"]}),\"\\n\",e(c.h2,{id:\"1refs\",children:[n(c.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#1refs\",children:n(c.span,{className:\"icon icon-link\"})}),\"1.refs\"]}),\"\\n\",e(c.p,{children:[\"我们直接看源码中的注册函数\",n(c.code,{children:\"registerRef\"}),\"，\",n(c.a,{href:\"https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fvuejs%2Fvue%2Fblob%2Fmain%2Fsrc%2Fcore%2Fvdom%2Fmodules%2Ftemplate-ref.ts%23L29-L81\",title:\"https://github.com/vuejs/vue/blob/main/src/core/vdom/modules/template-ref.ts#L29-L81\",children:\"源码地址\"})]}),\"\\n\",n(c.figure,{\"data-rehype-pretty-code-figure\":\"\",children:n(c.pre,{style:{backgroundColor:\"#17191e\",color:\"#eef0f9\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"houston\",children:e(c.code,{\"data-language\":\"js\",\"data-theme\":\"houston\",style:{display:\"grid\"},children:[e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"export\"}),n(c.span,{style:{color:\"#54B9FF\"},children:\" function\"}),n(c.span,{style:{color:\"#00DAEF\"},children:\" registerRef\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(c.span,{style:{color:\"#4BF3C8\",fontStyle:\"italic\"},children:\"vnode\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\": \"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\"VNodeWithData\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\", \"}),n(c.span,{style:{color:\"#4BF3C8\",fontStyle:\"italic\"},children:\"isRemoval\"}),n(c.span,{style:{color:\"#54B9FF\"},children:\"?\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\": \"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\"boolean\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\") {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"  const\"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\" ref\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"vnode\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"data\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"ref\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"  if\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" (!\"}),n(c.span,{style:{color:\"#00DAEF\"},children:\"isDef\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"ref\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\")) \"}),n(c.span,{style:{color:\"#54B9FF\"},children:\"return\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"  const\"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\" vm\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"vnode\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"context\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"  const\"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\" refValue\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"vnode\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"componentInstance\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" || \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"vnode\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"elm\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"  const\"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\" value\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"isRemoval\"}),n(c.span,{style:{color:\"#54B9FF\"},children:\" ?\"}),n(c.span,{style:{color:\"#FFD493\"},children:\" null\"}),n(c.span,{style:{color:\"#54B9FF\"},children:\" :\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\" refValue\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"  const\"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\" $refsValue\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"isRemoval\"}),n(c.span,{style:{color:\"#54B9FF\"},children:\" ?\"}),n(c.span,{style:{color:\"#FFD493\"},children:\" undefined\"}),n(c.span,{style:{color:\"#54B9FF\"},children:\" :\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\" refValue\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"  if\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" (\"}),n(c.span,{style:{color:\"#00DAEF\"},children:\"isFunction\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"ref\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\")) {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#00DAEF\"},children:\"    invokeWithErrorHandling\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"ref\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\", \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"vm\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\", [\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"value\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"], \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"vm\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\", \"}),n(c.span,{style:{color:\"#FFD493\"},children:\"`template ref function`\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\")\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#54B9FF\"},children:\"    return\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F9\"},children:\"  }\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"  //分支细节1\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"  const\"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\" isFor\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"vnode\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"data\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"refInFor\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"  const\"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\" _isString\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),n(c.span,{style:{color:\"#54B9FF\"},children:\"typeof\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\" ref\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" === \"}),n(c.span,{style:{color:\"#FFD493\"},children:\"'string'\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" || \"}),n(c.span,{style:{color:\"#54B9FF\"},children:\"typeof\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\" ref\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" === \"}),n(c.span,{style:{color:\"#FFD493\"},children:\"'number'\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"  const\"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\" _isRef\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),n(c.span,{style:{color:\"#00DAEF\"},children:\"isRef\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"ref\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\")\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"  const\"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\" refs\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"vm\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"$refs\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"  // 检测是否是字符串传的，不是就直接警告个类型错误\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"  if\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" (\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"_isString\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" || \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"_isRef\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\") {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"    if\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" (\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"isFor\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\") {\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"      // v-for里的ref特别处理\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#EEF0F9\"},children:\"    } \"}),n(c.span,{style:{color:\"#54B9FF\"},children:\"else\"}),n(c.span,{style:{color:\"#54B9FF\"},children:\" if\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" (\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"_isString\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\") {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"      if\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" (\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"isRemoval\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" && \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"refs\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"[\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"ref\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"] !== \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"refValue\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\") {\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#54B9FF\"},children:\"        return\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F9\"},children:\"      }\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"      // 给ref对象添加实例这时候我们就可以直接去调用一些属性和方法洛\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#4BF3C8\"},children:\"      refs\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"[\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"ref\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"] = \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"$refsValue\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"      // 分支细节2\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#00DAEF\"},children:\"      setSetupRef\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"vm\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\", \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"ref\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\", \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"value\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\")\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F9\"},children:\"    } \"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F9\"},children:\"  }\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"  //忽略代码\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F9\"},children:\"}\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:\" \"})]})})}),\"\\n\",n(c.p,{children:\"就这里就相当于给refs对象添加实例。\"}),\"\\n\",e(c.p,{children:[n(c.code,{children:\"时机\"}),\"： patch的时候。\"]}),\"\\n\",e(c.p,{children:[n(c.code,{children:\"分支细节1\"}),\"：\",n(c.code,{children:\"isFor\"}),\"的意思是这个\",n(c.code,{children:\"ref\"}),\"是否在\",n(c.code,{children:\"v-for\"}),\"中，调用逻辑 \",n(c.code,{children:\"initLifecycle\"}),\" => \",n(c.code,{children:\"processElement\"}),\" => \",n(c.code,{children:\"processRef\"}),\"(解析ref属性) => \",n(c.code,{children:\"checkInFor\"}),\"(检测ref属性是否在v-for里) ，结果就是如果v-for里的ref会被保存成数组而不是对象。\"]}),\"\\n\",e(c.p,{children:[n(c.code,{children:\"分支细节2\"}),\"： 生成Render函数之前的处理，实际的调用是在directives，但这实际跟loder和vue单文件相关，知识点太多惹，暂时略过（记住后面再去了解）。\"]}),\"\\n\",n(c.p,{children:\"实际上在这里注册了之后就可以去获取到实例然后去调用里面的属性了。\"}),\"\\n\",e(c.h2,{id:\"2parent和children\",children:[n(c.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#2parent和children\",children:n(c.span,{className:\"icon icon-link\"})}),\"2.parent和children\"]}),\"\\n\",e(c.p,{children:[\"我们直接看\",n(c.code,{children:\"initLifecycle\"}),\"这个大伙应该很熟悉了把，init的第一个阶段生命周期的初始化，\",n(c.a,{href:\"https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fvuejs%2Fvue%2Fblob%2Fmain%2Fsrc%2Fcore%2Finstance%2Flifecycle.ts%23L34-L60\",title:\"https://github.com/vuejs/vue/blob/main/src/core/instance/lifecycle.ts#L34-L60\",children:\"源码地址\"})]}),\"\\n\",n(c.figure,{\"data-rehype-pretty-code-figure\":\"\",children:n(c.pre,{style:{backgroundColor:\"#17191e\",color:\"#eef0f9\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"houston\",children:e(c.code,{\"data-language\":\"js\",\"data-theme\":\"houston\",style:{display:\"grid\"},children:[e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"export\"}),n(c.span,{style:{color:\"#54B9FF\"},children:\" function\"}),n(c.span,{style:{color:\"#00DAEF\"},children:\" initLifecycle\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(c.span,{style:{color:\"#4BF3C8\",fontStyle:\"italic\"},children:\"vm\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\": \"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\"Component\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\") {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"  const\"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\" options\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"vm\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"$options\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"  // locate first non-abstract parent\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"  // 抽象组件意思就是不呈现dom，就slot,keep-alive,transitions之类的\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"  let\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\" parent\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"options\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"parent\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"  // 父组件存在，然后当前组件非抽象组件就去循坏\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"  if\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" (\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"parent\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" && !\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"options\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"abstract\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\") {\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"    // 逐级添加父组件\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"    while\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" (\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"parent\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"$options\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"abstract\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" && \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"parent\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"$parent\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\") {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#4BF3C8\"},children:\"      parent\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"parent\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"$parent\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F9\"},children:\"    }\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"    // 加入子组件\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#4BF3C8\"},children:\"    parent\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"$children\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#00DAEF\"},children:\"push\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"vm\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\")\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F9\"},children:\"  }\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#4BF3C8\"},children:\"  vm\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"$parent\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"parent\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#4BF3C8\"},children:\"  vm\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"$root\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"parent\"}),n(c.span,{style:{color:\"#54B9FF\"},children:\" ?\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\" parent\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"$root\"}),n(c.span,{style:{color:\"#54B9FF\"},children:\" :\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\" vm\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#4BF3C8\"},children:\"  vm\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"$children\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" = []\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#4BF3C8\"},children:\"  vm\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"$refs\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" = {}\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#4BF3C8\"},children:\"  vm\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"_provided\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"parent\"}),n(c.span,{style:{color:\"#54B9FF\"},children:\" ?\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\" parent\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"_provided\"}),n(c.span,{style:{color:\"#54B9FF\"},children:\" :\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\" Object\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#00DAEF\"},children:\"create\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(c.span,{style:{color:\"#FFD493\"},children:\"null\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\")\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#4BF3C8\"},children:\"  vm\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"_watcher\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),n(c.span,{style:{color:\"#FFD493\"},children:\"null\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#4BF3C8\"},children:\"  vm\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"_inactive\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),n(c.span,{style:{color:\"#FFD493\"},children:\"null\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#4BF3C8\"},children:\"  vm\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"_directInactive\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),n(c.span,{style:{color:\"#FFD493\"},children:\"false\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#4BF3C8\"},children:\"  vm\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"_isMounted\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),n(c.span,{style:{color:\"#FFD493\"},children:\"false\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#4BF3C8\"},children:\"  vm\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"_isDestroyed\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),n(c.span,{style:{color:\"#FFD493\"},children:\"false\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#4BF3C8\"},children:\"  vm\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"_isBeingDestroyed\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),n(c.span,{style:{color:\"#FFD493\"},children:\"false\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F9\"},children:\"}\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:\" \"})]})})}),\"\\n\",n(c.p,{children:\"这里已经很清晰了，所以说从这里我们可以知道什么，那就是这2个父子实例对象的出现是非常早的。\"}),\"\\n\",e(c.p,{children:[n(c.code,{children:\"时机\"}),\":初始化生命周期initLifecycle的时候。\"]}),\"\\n\",e(c.h1,{id:\"provideinject\",children:[n(c.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#provideinject\",children:n(c.span,{className:\"icon icon-link\"})}),\"provide/inject\"]}),\"\\n\",e(c.p,{children:[n(c.code,{children:\"provide\"}),\"提供依赖，\",n(c.code,{children:\"inject\"}),\"注入依赖，还是老规矩先直接上源码。\"]}),\"\\n\",e(c.p,{children:[n(c.img,{src:\"https://ik.imagekit.io/leiakito/Vue3+ELLnput/provide.jpeg\",alt:\"image.png\"}),\"\\ninitState是做一些状态初始化操作的函数，那么我们就可以知道这个组件实例初始化的时候在\",n(c.code,{children:\"data/props\"}),\"前面调用了\",n(c.code,{children:\"initInjections\"}),\"，在\",n(c.code,{children:\"data/props\"}),\"后面调用了\",n(c.code,{children:\"initProvide\"}),\"，也很符合预期。\"]}),\"\\n\",e(c.h2,{id:\"1inject\",children:[n(c.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#1inject\",children:n(c.span,{className:\"icon icon-link\"})}),\"1.Inject\"]}),\"\\n\",n(c.figure,{\"data-rehype-pretty-code-figure\":\"\",children:n(c.pre,{style:{backgroundColor:\"#17191e\",color:\"#eef0f9\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"houston\",children:e(c.code,{\"data-language\":\"js\",\"data-theme\":\"houston\",style:{display:\"grid\"},children:[e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"  function\"}),n(c.span,{style:{color:\"#00DAEF\"},children:\" initInjections\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" (\"}),n(c.span,{style:{color:\"#4BF3C8\",fontStyle:\"italic\"},children:\"vm\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\") {\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"  // 根据注册的inject，通过$parent向上查找对应的provide\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"    var\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\" result\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),n(c.span,{style:{color:\"#00DAEF\"},children:\"resolveInject\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"vm\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"$options\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"inject\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\", \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"vm\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\");\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"    if\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" (\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"result\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\") {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#00DAEF\"},children:\"      toggleObserving\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(c.span,{style:{color:\"#FFD493\"},children:\"false\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\");\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"      //遍历\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#4BF3C8\"},children:\"      Object\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#00DAEF\"},children:\"keys\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"result\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\").\"}),n(c.span,{style:{color:\"#00DAEF\"},children:\"forEach\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(c.span,{style:{color:\"#54B9FF\"},children:\"function\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" (\"}),n(c.span,{style:{color:\"#4BF3C8\",fontStyle:\"italic\"},children:\"key\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\") {\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"        /* istanbul ignore else */\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F9\"},children:\"        {\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"          //添加响应式\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#00DAEF\"},children:\"          defineReactive$$1\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"vm\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\", \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"key\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\", \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"result\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"[\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"key\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"], \"}),n(c.span,{style:{color:\"#54B9FF\"},children:\"function\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" () {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#00DAEF\"},children:\"            warn\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#FFD493\"},children:'              \"Avoid mutating an injected value directly since the changes will be \"'}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" +\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#FFD493\"},children:'              \"overwritten whenever the provided component re-renders. \"'}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" +\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#FFD493\"},children:'              \"injection being mutated: '}),n(c.span,{style:{color:\"#EEF0F9\"},children:'\\\\\"'}),n(c.span,{style:{color:\"#FFD493\"},children:'\"'}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" + \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"key\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" + \"}),n(c.span,{style:{color:\"#FFD493\"},children:'\"'}),n(c.span,{style:{color:\"#EEF0F9\"},children:'\\\\\"'}),n(c.span,{style:{color:\"#FFD493\"},children:'\"'}),n(c.span,{style:{color:\"#EEF0F9\"},children:\",\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#4BF3C8\"},children:\"              vm\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F9\"},children:\"            );\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F9\"},children:\"          });\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F9\"},children:\"        }\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F9\"},children:\"      });\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#00DAEF\"},children:\"      toggleObserving\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(c.span,{style:{color:\"#FFD493\"},children:\"true\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\");\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F9\"},children:\"    }\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F9\"},children:\"  }\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:\" \"})]})})}),\"\\n\",e(c.p,{children:[\"该方法就是通过\",n(c.code,{children:\"resolveInject\"}),\"找到不停的循坏向上找\",n(c.code,{children:\"provided\"}),\"属性，然后又拿到值继续向父组件提供。然后遍历添加响应式，在页面里就可以用拉。\"]}),\"\\n\",e(c.h2,{id:\"2-provide\",children:[n(c.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#2-provide\",children:n(c.span,{className:\"icon icon-link\"})}),\"2. Provide\"]}),\"\\n\",n(c.figure,{\"data-rehype-pretty-code-figure\":\"\",children:n(c.pre,{style:{backgroundColor:\"#17191e\",color:\"#eef0f9\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"houston\",children:e(c.code,{\"data-language\":\"js\",\"data-theme\":\"houston\",style:{display:\"grid\"},children:[e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"export\"}),n(c.span,{style:{color:\"#54B9FF\"},children:\" function\"}),n(c.span,{style:{color:\"#00DAEF\"},children:\" initProvide\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(c.span,{style:{color:\"#4BF3C8\",fontStyle:\"italic\"},children:\"vm\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\": \"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\"Component\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\") {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"  const\"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\" provideOption\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"vm\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"$options\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"provide\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"  if\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" (\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"provideOption\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\") {\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"    // 把provideOption给vm的provideOption\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"    const\"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\" provided\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),n(c.span,{style:{color:\"#00DAEF\"},children:\"isFunction\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"provideOption\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\")\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"      ?\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\" provideOption\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#00DAEF\"},children:\"call\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"vm\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\")\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"      :\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\" provideOption\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"    if\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" (!\"}),n(c.span,{style:{color:\"#00DAEF\"},children:\"isObject\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"provided\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\")) {\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#54B9FF\"},children:\"      return\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F9\"},children:\"    }\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"    const\"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\" source\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),n(c.span,{style:{color:\"#00DAEF\"},children:\"resolveProvided\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"vm\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\")\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"    // 忽略ie9的兼容代码\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F9\"},children:\"  }\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F9\"},children:\"}\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:\" \"})]})})}),\"\\n\",e(c.p,{children:[\"太抽象拉只能说，该方法单纯把组件注册的\",n(c.code,{children:\"provide\"}),\"值，赋值给\",n(c.code,{children:\"vm.provideOption\"}),\"，让\",n(c.code,{children:\"resolveInject\"}),\"(看前面)使用。然后其实\",n(c.code,{children:\"vm.$options.provideOption\"}),\"是个函数，其实是调用这个函数得到的\",n(c.code,{children:\"provided\"}),\"这个函数。在父组件实例化时，我们也调用了\",n(c.code,{children:\"mergeOptions\"}),\"合并配置项对父组件中的\",n(c.code,{children:\"provide\"}),\"属性进行了处理：\"]}),\"\\n\",n(c.figure,{\"data-rehype-pretty-code-figure\":\"\",children:n(c.pre,{style:{backgroundColor:\"#17191e\",color:\"#eef0f9\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"houston\",children:e(c.code,{\"data-language\":\"js\",\"data-theme\":\"houston\",style:{display:\"grid\"},children:[n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"// provide的处理\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#4BF3C8\"},children:\"strats\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"provide\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"mergeDataOrFn\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"/**\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\" * Data\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\" */\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\" // Data的处理函数\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"export\"}),n(c.span,{style:{color:\"#54B9FF\"},children:\" function\"}),n(c.span,{style:{color:\"#00DAEF\"},children:\" mergeDataOrFn\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#4BF3C8\",fontStyle:\"italic\"},children:\"  parentVal\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\": \"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\"any\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\",\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#4BF3C8\",fontStyle:\"italic\"},children:\"  childVal\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\": \"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\"any\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\",\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#4BF3C8\",fontStyle:\"italic\"},children:\"  vm\"}),n(c.span,{style:{color:\"#54B9FF\"},children:\"?\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\": \"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\"Component\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#EEF0F9\"},children:\"): \"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\"Function\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" | null {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"  if\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" (!\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"vm\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\") {\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"    // in a Vue.extend merge, both should be functions\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"    if\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" (!\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"childVal\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\") {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"      return\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\" parentVal\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F9\"},children:\"    }\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"    if\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" (!\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"parentVal\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\") {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"      return\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\" childVal\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F9\"},children:\"    }\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"    // when parentVal & childVal are both present,\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"    // we need to return a function that returns the\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"    // merged result of both functions... no need to\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"    // check if parentVal is a function here because\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"    // it has to be a function to pass previous merges.\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"    return\"}),n(c.span,{style:{color:\"#54B9FF\"},children:\" function\"}),n(c.span,{style:{color:\"#00DAEF\"},children:\" mergedDataFn\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"() {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"      return\"}),n(c.span,{style:{color:\"#00DAEF\"},children:\" mergeData\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#00DAEF\"},children:\"        isFunction\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"childVal\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\") \"}),n(c.span,{style:{color:\"#54B9FF\"},children:\"?\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\" childVal\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#00DAEF\"},children:\"call\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\"this\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\", \"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\"this\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\") \"}),n(c.span,{style:{color:\"#54B9FF\"},children:\":\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\" childVal\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\",\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#00DAEF\"},children:\"        isFunction\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"parentVal\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\") \"}),n(c.span,{style:{color:\"#54B9FF\"},children:\"?\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\" parentVal\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#00DAEF\"},children:\"call\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\"this\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\", \"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\"this\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\") \"}),n(c.span,{style:{color:\"#54B9FF\"},children:\":\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\" parentVal\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F9\"},children:\"      )\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F9\"},children:\"    }\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#EEF0F9\"},children:\"  } \"}),n(c.span,{style:{color:\"#54B9FF\"},children:\"else\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"    return\"}),n(c.span,{style:{color:\"#54B9FF\"},children:\" function\"}),n(c.span,{style:{color:\"#00DAEF\"},children:\" mergedInstanceDataFn\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"() {\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"      // instance merge\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"      const\"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\" instanceData\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),n(c.span,{style:{color:\"#00DAEF\"},children:\"isFunction\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"childVal\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\")\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"        ?\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\" childVal\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#00DAEF\"},children:\"call\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"vm\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\", \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"vm\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\")\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"        :\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\" childVal\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"      const\"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\" defaultData\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),n(c.span,{style:{color:\"#00DAEF\"},children:\"isFunction\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"parentVal\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\")\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"        ?\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\" parentVal\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#00DAEF\"},children:\"call\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"vm\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\", \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"vm\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\")\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"        :\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\" parentVal\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"      if\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" (\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"instanceData\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\") {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"        return\"}),n(c.span,{style:{color:\"#00DAEF\"},children:\" mergeData\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"instanceData\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\", \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"defaultData\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\")\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#EEF0F9\"},children:\"      } \"}),n(c.span,{style:{color:\"#54B9FF\"},children:\"else\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"        return\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\" defaultData\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F9\"},children:\"      }\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F9\"},children:\"    }\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F9\"},children:\"  }\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F9\"},children:\"}\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"// data\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#4BF3C8\"},children:\"strats\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#00DAEF\"},children:\"data\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),n(c.span,{style:{color:\"#54B9FF\"},children:\"function\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" (\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#4BF3C8\",fontStyle:\"italic\"},children:\"  parentVal\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\": \"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\"any\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\",\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#4BF3C8\",fontStyle:\"italic\"},children:\"  childVal\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\": \"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\"any\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\",\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#4BF3C8\",fontStyle:\"italic\"},children:\"  vm\"}),n(c.span,{style:{color:\"#54B9FF\"},children:\"?\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\": \"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\"Component\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#EEF0F9\"},children:\"): \"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\"Function\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" | null {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"  if\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" (!\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"vm\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\") {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"    if\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" (\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"childVal\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" && \"}),n(c.span,{style:{color:\"#54B9FF\"},children:\"typeof\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\" childVal\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" !== \"}),n(c.span,{style:{color:\"#FFD493\"},children:\"'function'\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\") {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#4BF3C8\"},children:\"      __DEV__\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" &&\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#00DAEF\"},children:\"        warn\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#FFD493\"},children:\"          'The \\\"data\\\" option should be a function '\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" +\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#FFD493\"},children:\"            'that returns a per-instance value in component '\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" +\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#FFD493\"},children:\"            'definitions.'\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\",\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#4BF3C8\"},children:\"          vm\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F9\"},children:\"        )\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"      return\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\" parentVal\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F9\"},children:\"    }\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"    return\"}),n(c.span,{style:{color:\"#00DAEF\"},children:\" mergeDataOrFn\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"parentVal\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\", \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"childVal\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\")\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F9\"},children:\"  }\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"  return\"}),n(c.span,{style:{color:\"#00DAEF\"},children:\" mergeDataOrFn\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"parentVal\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\", \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"childVal\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\", \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"vm\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\")\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F9\"},children:\"}\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:\" \"})]})})}),\"\\n\",e(c.p,{children:[\"讲一下以Provide的视角看是个什么流程，starts的provide是mergedInstanceDataFn他不停的给当前组件整理父组件子组件的数据，然后交给最上面的\",n(c.code,{children:\"provideOption.call(vm)\"}),\"传入当前组件去回调，就已经提供给了当前组件中。\"]}),\"\\n\",e(c.h1,{id:\"onemit\",children:[n(c.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#onemit\",children:n(c.span,{className:\"icon icon-link\"})}),\"on/emit\"]}),\"\\n\",e(c.p,{children:[n(c.code,{children:\"$on\"}),\"和\",n(c.code,{children:\"$emit\"}),\"就比较简单了，看源码\"]}),\"\\n\",n(c.figure,{\"data-rehype-pretty-code-figure\":\"\",children:n(c.pre,{style:{backgroundColor:\"#17191e\",color:\"#eef0f9\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"houston\",children:e(c.code,{\"data-language\":\"js\",\"data-theme\":\"houston\",style:{display:\"grid\"},children:[n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"// $on 的实现逻辑\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#ACAFFF\"},children:\"Vue\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"prototype\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#00DAEF\"},children:\"$on\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),n(c.span,{style:{color:\"#54B9FF\"},children:\"function\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" (\"}),n(c.span,{style:{color:\"#4BF3C8\",fontStyle:\"italic\"},children:\"event\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\": \"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\"string\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" | \"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\"Array\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"<\"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\"string\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\">, \"}),n(c.span,{style:{color:\"#00DAEF\"},children:\"fn\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\": \"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\"Function\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"): \"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\"Component\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"    const\"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\" vm\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\": \"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\"Component\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\"this\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"    if\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" (\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"Array\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#00DAEF\"},children:\"isArray\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"event\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\")) {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"      for\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" (\"}),n(c.span,{style:{color:\"#54B9FF\"},children:\"let\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\" i\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),n(c.span,{style:{color:\"#FFD493\"},children:\"0\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\", \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"l\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"event\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"length\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"; \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"i\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" < \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"l\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"; \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"i\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"++) {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#4BF3C8\"},children:\"        vm\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#00DAEF\"},children:\"$on\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"event\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"[\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"i\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"], \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"fn\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\")\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F9\"},children:\"      }\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#EEF0F9\"},children:\"    } \"}),n(c.span,{style:{color:\"#54B9FF\"},children:\"else\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#EEF0F9\"},children:\"      (\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"vm\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"_events\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"[\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"event\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"] || (\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"vm\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"_events\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"[\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"event\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"] = [])).\"}),n(c.span,{style:{color:\"#00DAEF\"},children:\"push\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"fn\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\")\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F9\"},children:\"    }\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"    return\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\" vm\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F9\"},children:\"  }\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"// $emit 的实现逻辑\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#ACAFFF\"},children:\"Vue\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"prototype\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#00DAEF\"},children:\"$emit\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),n(c.span,{style:{color:\"#54B9FF\"},children:\"function\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" (\"}),n(c.span,{style:{color:\"#4BF3C8\",fontStyle:\"italic\"},children:\"event\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\": \"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\"string\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"): \"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\"Component\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"    const\"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\" vm\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\": \"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\"Component\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\"this\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"    let\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\" cbs\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"vm\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"_events\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"[\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"event\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"]\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"    if\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" (\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"cbs\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\") {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#4BF3C8\"},children:\"      cbs\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"cbs\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"length\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" > \"}),n(c.span,{style:{color:\"#FFD493\"},children:\"1\"}),n(c.span,{style:{color:\"#54B9FF\"},children:\" ?\"}),n(c.span,{style:{color:\"#00DAEF\"},children:\" toArray\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"cbs\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\") \"}),n(c.span,{style:{color:\"#54B9FF\"},children:\":\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\" cbs\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"      const\"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\" args\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),n(c.span,{style:{color:\"#00DAEF\"},children:\"toArray\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\"arguments\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\", \"}),n(c.span,{style:{color:\"#FFD493\"},children:\"1\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\")\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"      const\"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\" info\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),n(c.span,{style:{color:\"#FFD493\"},children:'`event handler for \"'}),n(c.span,{style:{color:\"#54B9FF\"},children:\"${\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"event\"}),n(c.span,{style:{color:\"#54B9FF\"},children:\"}\"}),n(c.span,{style:{color:\"#FFD493\"},children:'\"`'})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"      for\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" (\"}),n(c.span,{style:{color:\"#54B9FF\"},children:\"let\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\" i\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),n(c.span,{style:{color:\"#FFD493\"},children:\"0\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\", \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"l\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"cbs\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"length\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"; \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"i\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" < \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"l\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"; \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"i\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"++) {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#00DAEF\"},children:\"        invokeWithErrorHandling\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"cbs\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"[\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"i\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"], \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"vm\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\", \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"args\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\", \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"vm\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\", \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"info\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\")\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F9\"},children:\"      }\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F9\"},children:\"    }\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"    return\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\" vm\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F9\"},children:\"  }\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"// invokeWithErrorHandling 的实现逻辑\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"export\"}),n(c.span,{style:{color:\"#54B9FF\"},children:\" function\"}),n(c.span,{style:{color:\"#00DAEF\"},children:\" invokeWithErrorHandling\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" (\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#00DAEF\"},children:\"  handler\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\": \"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\"Function\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\",\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#4BF3C8\",fontStyle:\"italic\"},children:\"  context\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\": \"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\"any\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\",\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#4BF3C8\",fontStyle:\"italic\"},children:\"  args\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\": null | \"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\"any\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"[],\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#4BF3C8\",fontStyle:\"italic\"},children:\"  vm\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\": \"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\"any\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\",\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#4BF3C8\",fontStyle:\"italic\"},children:\"  info\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\": \"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\"string\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F9\"},children:\") {\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"  let\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\" res\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"  try\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#4BF3C8\"},children:\"    res\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"args\"}),n(c.span,{style:{color:\"#54B9FF\"},children:\" ?\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\" handler\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#00DAEF\"},children:\"apply\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"context\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\", \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"args\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\") \"}),n(c.span,{style:{color:\"#54B9FF\"},children:\":\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\" handler\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#00DAEF\"},children:\"call\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"context\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\")\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"    if\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" (\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"res\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" && !\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"res\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"_isVue\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" && \"}),n(c.span,{style:{color:\"#00DAEF\"},children:\"isPromise\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"res\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\") && !(\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"res\"}),n(c.span,{style:{color:\"#54B9FF\"},children:\" as\"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\" any\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\").\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"_handled\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\") {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#4BF3C8\"},children:\"      res\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(c.span,{style:{color:\"#00DAEF\"},children:\"catch\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(c.span,{style:{color:\"#4BF3C8\",fontStyle:\"italic\"},children:\"e\"}),n(c.span,{style:{color:\"#54B9FF\"},children:\" =>\"}),n(c.span,{style:{color:\"#00DAEF\"},children:\" handleError\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"e\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\", \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"vm\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\", \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"info\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" + \"}),n(c.span,{style:{color:\"#FFD493\"},children:\"` (Promise/async)`\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"))\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"      // issue #9511\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"      // avoid catch triggering multiple times when nested calls\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#EEF0F9\"},children:\"      ;(\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"res\"}),n(c.span,{style:{color:\"#54B9FF\"},children:\" as\"}),n(c.span,{style:{color:\"#ACAFFF\"},children:\" any\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\").\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"_handled\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),n(c.span,{style:{color:\"#FFD493\"},children:\"true\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F9\"},children:\"    }\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#EEF0F9\"},children:\"  } \"}),n(c.span,{style:{color:\"#54B9FF\"},children:\"catch\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\" (\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"e\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\") {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#00DAEF\"},children:\"    handleError\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"e\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\", \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"vm\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\", \"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\"info\"}),n(c.span,{style:{color:\"#EEF0F9\"},children:\")\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F9\"},children:\"  }\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#54B9FF\"},children:\"  return\"}),n(c.span,{style:{color:\"#4BF3C8\"},children:\" res\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#EEF0F9\"},children:\"}\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:\" \"})]})})}),\"\\n\",e(c.p,{children:[n(c.code,{children:\"$on\"}),\"用来收集所有的事件依赖，他会将传入的参数\",n(c.code,{children:\"event\"}),\"和\",n(c.code,{children:\"fn\"}),\"作为key和value的形式存到\",n(c.code,{children:\"vm._events\"}),\"这个事件集合里，就像这样\",n(c.code,{children:\"vm._events[event]=[fn]\"})]}),\"\\n\",e(c.p,{children:[n(c.code,{children:\"$emit\"}),\"是用来触发事件的，他会根据传入的\",n(c.code,{children:\"event\"}),\"在\",n(c.code,{children:\"vm_events\"}),\"中找到对应的事件并执行\",n(c.code,{children:\"invokeWithErrorHandling(cbs[i], vm, args, vm, info)\"})]}),\"\\n\",e(c.p,{children:[n(c.code,{children:\"invokeWithErrorHandling\"}),\"就一个，\",n(c.code,{children:\"apply\"}),\"或者\",n(c.code,{children:\"call\"}),\"然后去执行。\"]}),\"\\n\",e(c.h1,{id:\"总结\",children:[n(c.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#总结\",children:n(c.span,{className:\"icon icon-link\"})}),\"总结\"]}),\"\\n\",e(c.p,{children:[\"学源码确实是一个很枯燥的事情，但是其实挺锻炼逻辑能力和写代码能力的，就感觉每次看完一个框架的源码都是对自己能力的一个大提升，推荐一个渐进顺序vue源码=>react源码=>node交互层源码和一个长期一些我们常用包源码比如p-limit,axios,ajax等之类的。有问题可以+\",n(c.a,{href:\"https://juejin.cn/pin/7172471008291455013\",children:\"联系方式\"}),\"我们一起交流，一起卷，老生常谈一下，不是为了面试去学习，希望大家保持一颗学习去心，和写代码的热情。\"]})]})}return{default:function(l={}){const{wrapper:e}=l.components||{};return e?n(e,{...l,children:n(_createMdxContent,{...l})}):_createMdxContent(l)}};",
    "toc": {
      "content": [
        {
          "title": "vue2各种通信方式源码的实现方式",
          "url": "#vue2各种通信方式源码的实现方式",
          "items": []
        },
        {
          "title": "开篇",
          "url": "#开篇",
          "items": []
        },
        {
          "title": "实例通信",
          "url": "#实例通信",
          "items": [
            {
              "title": "1.refs",
              "url": "#1refs",
              "items": []
            },
            {
              "title": "2.parent和children",
              "url": "#2parent和children",
              "items": []
            }
          ]
        },
        {
          "title": "provide/inject",
          "url": "#provideinject",
          "items": [
            {
              "title": "1.Inject",
              "url": "#1inject",
              "items": []
            },
            {
              "title": "2. Provide",
              "url": "#2-provide",
              "items": []
            }
          ]
        },
        {
          "title": "on/emit",
          "url": "#onemit",
          "items": []
        },
        {
          "title": "总结",
          "url": "#总结",
          "items": []
        }
      ],
      "visible": true
    },
    "slugAsParams": "3.vue_communication"
  },
  {
    "slug": "/content/vue/4.vue_actualc_ombat",
    "title": "4.前端vue实战小测试",
    "description": "前端vue实战小测试",
    "published": true,
    "date": "2022-12-09T00:00:00.000Z",
    "body": "const{Fragment:l,jsx:e,jsxs:n}=arguments[0];function _createMdxContent(c){const r={a:\"a\",code:\"code\",figure:\"figure\",h1:\"h1\",h2:\"h2\",img:\"img\",p:\"p\",pre:\"pre\",span:\"span\",...c.components};return n(l,{children:[n(r.h1,{id:\"前端vue实战小测试\",children:[e(r.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#前端vue实战小测试\",children:e(r.span,{className:\"icon icon-link\"})}),\"前端vue实战小测试\"]}),\"\\n\",n(r.h2,{id:\"问题1\",children:[e(r.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#问题1\",children:e(r.span,{className:\"icon icon-link\"})}),\"问题1\"]}),\"\\n\",n(r.p,{children:[\"我们先直觉判断一下，当\",e(r.code,{children:\"input value\"}),\"大于5的时候是否会禁用。\\n\",e(r.img,{src:\"https://ik.imagekit.io/leiakito/Vue3+ELLnput/3aea90470f644cd1b0dccbbf9a8b95e0~tplv-k3u1fbpfcp-zoom-in-crop-mark_1512_0_0_0.webp?updatedAt=1739723206913\",alt:\"image.png\"}),\"\\n其实这题考的就是对象的引用，我们可以在浏览器上试试下面的内容会打印什么。\"]}),\"\\n\",e(r.figure,{\"data-rehype-pretty-code-figure\":\"\",children:e(r.pre,{style:{backgroundColor:\"#17191e\",color:\"#eef0f9\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"houston\",children:n(r.code,{\"data-language\":\"js\",\"data-theme\":\"houston\",style:{display:\"grid\"},children:[n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#54B9FF\"},children:\"let\"}),e(r.span,{style:{color:\"#4BF3C8\"},children:\" a\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),e(r.span,{style:{color:\"#FFD493\"},children:\"1\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\";\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#54B9FF\"},children:\"let\"}),e(r.span,{style:{color:\"#4BF3C8\"},children:\" b\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\" = {\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#4BF3C8\"},children:\"  c\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\": \"}),e(r.span,{style:{color:\"#4BF3C8\"},children:\"a\"})]}),\"\\n\",e(r.span,{\"data-line\":\"\",children:e(r.span,{style:{color:\"#EEF0F9\"},children:\"}\"})}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#4BF3C8\"},children:\"a\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),e(r.span,{style:{color:\"#FFD493\"},children:\"3\"})]}),\"\\n\",e(r.span,{\"data-line\":\"\",children:\" \"})]})})}),\"\\n\",n(r.p,{children:[\"讲解一下把再\",e(r.code,{children:\"inputValue\"}),\"大于5的时候，我们看似改变了\",e(r.code,{children:\"disabled\"}),\"，但实际上\",e(r.code,{children:\"buttonOption\"}),\"里的\",e(r.code,{children:\"disabled\"}),\"并没有改变，对于有时候会传一些复杂配置项的时候可能会遇到这个问题，这时候我们有个比较好的办法就是\",e(r.code,{children:\"computed\"}),\"，\",e(r.code,{children:\"computed\"}),\"会依赖收集，当依赖变化的时候，\",e(r.code,{children:\"buttonOption.disabled\"}),\"的值就会相应变化。\",e(r.a,{href:\"https://link.juejin.cn?target=https%3A%2F%2Fcodesandbox.io%2Fs%2Fwizardly-dubinsky-hilqyh%3Ffile%3D%2Fsrc%2FApp.vue\",title:\"https://codesandbox.io/s/wizardly-dubinsky-hilqyh?file=/src/App.vue\",children:\"在线地址\"}),\"。\"]}),\"\\n\",e(r.p,{children:e(r.img,{src:\"https://ik.imagekit.io/leiakito/Vue3+ELLnput/Vue%20%E5%AE%9E%E6%88%98%E5%B0%8F%E6%B5%8B%E8%AF%95%E9%97%AE%E9%A2%981.webp?updatedAt=1739723206794\",alt:\"image.png\"})}),\"\\n\",n(r.h2,{id:\"问题2\",children:[e(r.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#问题2\",children:e(r.span,{className:\"icon icon-link\"})}),\"问题2\"]}),\"\\n\",n(r.p,{children:[\"老规矩直觉判断，当按钮点击的时候，是否会进行深监听，以及新旧value的值。 \",e(r.img,{src:\"https://ik.imagekit.io/leiakito/Vue3+ELLnput/Vue%20%E5%AE%9E%E6%88%98%E5%B0%8F%E6%B5%8B%E8%AF%95%E9%97%AE%E9%A2%981%20(1).webp?updatedAt=1739723207103\",alt:\"image.png\"}),\"\\n此时我们监听了一个\",e(r.code,{children:\"reactive\"}),\"定义的响应式数据，并且关闭了深监听，可是在打印中，我们依然进行了一个深监听，并且\",e(r.code,{children:\"oldValue\"}),\"的值还是错误的。\"]}),\"\\n\",n(r.p,{children:[\"然后我去翻了一下源码，一看不知道，原来不止是\",e(r.code,{children:\"reactive\"}),\"定义的会有这个问题\"]}),\"\\n\",e(r.p,{children:\"我们先打一下断点\"}),\"\\n\",n(r.p,{children:[\"发现了一个问题，就是\",e(r.code,{children:\"oldValue\"}),\"和\",e(r.code,{children:\"newValue\"}),\"的引用是相同的，当\",e(r.code,{children:\"newValue\"}),\"改变的时候\",e(r.code,{children:\"oldValue\"}),\"也会改变。 \",e(r.img,{src:\"https://ik.imagekit.io/leiakito/Vue3+ELLnput/Vue%20%E5%AE%9E%E6%88%98%E5%B0%8F%E6%B5%8B%E8%AF%95%E9%97%AE%E9%A2%981%20(2).webp?updatedAt=1739723207302\",alt:\"image.png\"}),\"这里我们看到最后，是导致\",e(r.code,{children:\"oldValue\"}),\"和\",e(r.code,{children:\"newValue\"}),\"引用相同的原因，而只有当我们直接性的使用一些引用类型进行监听的时候才会造成这个问题，而一些基本类型或者引用类型上的属性则不会造成\",e(r.code,{children:\"OldValue\"}),\"的失效问题。\"]}),\"\\n\",e(r.figure,{\"data-rehype-pretty-code-figure\":\"\",children:e(r.pre,{style:{backgroundColor:\"#17191e\",color:\"#eef0f9\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"houston\",children:n(r.code,{\"data-language\":\"js\",\"data-theme\":\"houston\",style:{display:\"grid\"},children:[n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#54B9FF\"},children:\"function\"}),e(r.span,{style:{color:\"#00DAEF\"},children:\" doWatch\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\"(\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#4BF3C8\",fontStyle:\"italic\"},children:\"  source\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\": \"}),e(r.span,{style:{color:\"#ACAFFF\"},children:\"WatchSource\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\" | \"}),e(r.span,{style:{color:\"#ACAFFF\"},children:\"WatchSource\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\"[] | \"}),e(r.span,{style:{color:\"#ACAFFF\"},children:\"WatchEffect\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\" | object,\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#4BF3C8\",fontStyle:\"italic\"},children:\"  cb\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\": \"}),e(r.span,{style:{color:\"#ACAFFF\"},children:\"WatchCallback\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\" | null,\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#EEF0F9\"},children:\"  { \"}),e(r.span,{style:{color:\"#4BF3C8\",fontStyle:\"italic\"},children:\"immediate\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\", \"}),e(r.span,{style:{color:\"#4BF3C8\",fontStyle:\"italic\"},children:\"deep\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\", \"}),e(r.span,{style:{color:\"#4BF3C8\",fontStyle:\"italic\"},children:\"flush\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\", \"}),e(r.span,{style:{color:\"#4BF3C8\",fontStyle:\"italic\"},children:\"onTrack\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\", \"}),e(r.span,{style:{color:\"#4BF3C8\",fontStyle:\"italic\"},children:\"onTrigger\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\" }: \"}),e(r.span,{style:{color:\"#ACAFFF\"},children:\"WatchOptions\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),e(r.span,{style:{color:\"#ACAFFF\"},children:\"EMPTY_OBJ\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#EEF0F9\"},children:\"): \"}),e(r.span,{style:{color:\"#ACAFFF\"},children:\"WatchStopHandle\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\" {\"})]}),\"\\n\",e(r.span,{\"data-line\":\"\",children:e(r.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"  //忽略代码\"})}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#54B9FF\"},children:\"  const\"}),e(r.span,{style:{color:\"#ACAFFF\"},children:\" instance\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),e(r.span,{style:{color:\"#4BF3C8\"},children:\"currentInstance\"}),e(r.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\" // 当前组件实例\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#54B9FF\"},children:\"  let\"}),e(r.span,{style:{color:\"#00DAEF\"},children:\" getter\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\": () \"}),e(r.span,{style:{color:\"#54B9FF\"},children:\"=>\"}),e(r.span,{style:{color:\"#ACAFFF\"},children:\" any\"}),e(r.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\" //副作用参数\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#54B9FF\"},children:\"  let\"}),e(r.span,{style:{color:\"#4BF3C8\"},children:\" forceTrigger\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),e(r.span,{style:{color:\"#FFD493\"},children:\"false\"}),e(r.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\" //是否强制更新\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#54B9FF\"},children:\"  let\"}),e(r.span,{style:{color:\"#4BF3C8\"},children:\" isMultiSource\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),e(r.span,{style:{color:\"#FFD493\"},children:\"false\"}),e(r.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\" //数组开启\"})]}),\"\\n\",e(r.span,{\"data-line\":\"\",children:e(r.span,{style:{color:\"#EEF0F9\"},children:\"}\"})}),\"\\n\",e(r.span,{\"data-line\":\"\",children:e(r.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"   // 组装setter\"})}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#54B9FF\"},children:\"  if\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\" (\"}),e(r.span,{style:{color:\"#00DAEF\"},children:\"isRef\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),e(r.span,{style:{color:\"#4BF3C8\"},children:\"source\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\")) {\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#00DAEF\"},children:\"    getter\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\" = () \"}),e(r.span,{style:{color:\"#54B9FF\"},children:\"=>\"}),e(r.span,{style:{color:\"#4BF3C8\"},children:\" source\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\".\"}),e(r.span,{style:{color:\"#4BF3C8\"},children:\"value\"})]}),\"\\n\",e(r.span,{\"data-line\":\"\",children:e(r.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"    // shallowRef也会有oldValue问题，性能优化用的这是\"})}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#4BF3C8\"},children:\"    forceTrigger\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),e(r.span,{style:{color:\"#00DAEF\"},children:\"isShallow\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),e(r.span,{style:{color:\"#4BF3C8\"},children:\"source\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\")\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#EEF0F9\"},children:\"  } \"}),e(r.span,{style:{color:\"#54B9FF\"},children:\"else\"}),e(r.span,{style:{color:\"#54B9FF\"},children:\" if\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\" (\"}),e(r.span,{style:{color:\"#00DAEF\"},children:\"isReactive\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),e(r.span,{style:{color:\"#4BF3C8\"},children:\"source\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\")) {\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#00DAEF\"},children:\"    getter\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\" = () \"}),e(r.span,{style:{color:\"#54B9FF\"},children:\"=>\"}),e(r.span,{style:{color:\"#4BF3C8\"},children:\" source\"})]}),\"\\n\",e(r.span,{\"data-line\":\"\",children:e(r.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"    // 如果是reactive定义的会强制设置成deep，会有oldValue问题\"})}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#4BF3C8\"},children:\"    deep\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),e(r.span,{style:{color:\"#FFD493\"},children:\"true\"})]}),\"\\n\",e(r.span,{\"data-line\":\"\",children:e(r.span,{style:{color:\"#EEF0F9\"},children:\"  } \"})}),\"\\n\",e(r.span,{\"data-line\":\"\",children:e(r.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"  //忽略代码\"})}),\"\\n\",e(r.span,{\"data-line\":\"\",children:e(r.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"    // 初始化 oldValue此时为{}\"})}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#54B9FF\"},children:\"  let\"}),e(r.span,{style:{color:\"#4BF3C8\"},children:\" oldValue\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),e(r.span,{style:{color:\"#4BF3C8\"},children:\"isMultiSource\"}),e(r.span,{style:{color:\"#54B9FF\"},children:\" ?\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\" [] \"}),e(r.span,{style:{color:\"#54B9FF\"},children:\":\"}),e(r.span,{style:{color:\"#ACAFFF\"},children:\" INITIAL_WATCHER_VALUE\"})]}),\"\\n\",e(r.span,{\"data-line\":\"\",children:e(r.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"  // 声明一个 job 调度器任务\"})}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#54B9FF\"},children:\"  const\"}),e(r.span,{style:{color:\"#00DAEF\"},children:\" job\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\": \"}),e(r.span,{style:{color:\"#ACAFFF\"},children:\"SchedulerJob\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\" = () \"}),e(r.span,{style:{color:\"#54B9FF\"},children:\"=>\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\" {\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#54B9FF\"},children:\"    if\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\" (!\"}),e(r.span,{style:{color:\"#4BF3C8\"},children:\"effect\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\".\"}),e(r.span,{style:{color:\"#4BF3C8\"},children:\"active\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\") { \"}),e(r.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"// 如果副作用以停用则直接返回\"})]}),\"\\n\",e(r.span,{\"data-line\":\"\",children:e(r.span,{style:{color:\"#54B9FF\"},children:\"      return\"})}),\"\\n\",e(r.span,{\"data-line\":\"\",children:e(r.span,{style:{color:\"#EEF0F9\"},children:\"    }\"})}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#54B9FF\"},children:\"    if\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\" (\"}),e(r.span,{style:{color:\"#4BF3C8\"},children:\"cb\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\") {\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#54B9FF\"},children:\"      const\"}),e(r.span,{style:{color:\"#ACAFFF\"},children:\" newValue\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),e(r.span,{style:{color:\"#4BF3C8\"},children:\"effect\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\".\"}),e(r.span,{style:{color:\"#00DAEF\"},children:\"run\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\"()\"})]}),\"\\n\",e(r.span,{\"data-line\":\"\",children:e(r.span,{style:{color:\"#EEF0F9\"},children:\"      \"})}),\"\\n\",e(r.span,{\"data-line\":\"\",children:e(r.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"      // 判断是否需要执行 cb\"})}),\"\\n\",e(r.span,{\"data-line\":\"\",children:e(r.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"      // 1. getter 函数的值被改变，没有发生改变则不执行 cb 回调\"})}),\"\\n\",e(r.span,{\"data-line\":\"\",children:e(r.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"      // 2. 设置了 deep 深度监听\"})}),\"\\n\",e(r.span,{\"data-line\":\"\",children:e(r.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"      // 3. forceTrigger 为 true\"})}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#54B9FF\"},children:\"      if\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\" (\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#4BF3C8\"},children:\"        deep\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\" ||\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#4BF3C8\"},children:\"        forceTrigger\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\" ||\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#EEF0F9\"},children:\"        (\"}),e(r.span,{style:{color:\"#4BF3C8\"},children:\"isMultiSource\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#54B9FF\"},children:\"          ?\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\" (\"}),e(r.span,{style:{color:\"#4BF3C8\"},children:\"newValue\"}),e(r.span,{style:{color:\"#54B9FF\"},children:\" as\"}),e(r.span,{style:{color:\"#ACAFFF\"},children:\" any\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\"[]).\"}),e(r.span,{style:{color:\"#00DAEF\"},children:\"some\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\"((\"}),e(r.span,{style:{color:\"#4BF3C8\",fontStyle:\"italic\"},children:\"v\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\", \"}),e(r.span,{style:{color:\"#4BF3C8\",fontStyle:\"italic\"},children:\"i\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\") \"}),e(r.span,{style:{color:\"#54B9FF\"},children:\"=>\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#00DAEF\"},children:\"              hasChanged\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),e(r.span,{style:{color:\"#4BF3C8\"},children:\"v\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\", (\"}),e(r.span,{style:{color:\"#4BF3C8\"},children:\"oldValue\"}),e(r.span,{style:{color:\"#54B9FF\"},children:\" as\"}),e(r.span,{style:{color:\"#ACAFFF\"},children:\" any\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\"[])[\"}),e(r.span,{style:{color:\"#4BF3C8\"},children:\"i\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\"])\"})]}),\"\\n\",e(r.span,{\"data-line\":\"\",children:e(r.span,{style:{color:\"#EEF0F9\"},children:\"            )\"})}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#54B9FF\"},children:\"          :\"}),e(r.span,{style:{color:\"#00DAEF\"},children:\" hasChanged\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),e(r.span,{style:{color:\"#4BF3C8\"},children:\"newValue\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\", \"}),e(r.span,{style:{color:\"#4BF3C8\"},children:\"oldValue\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\")) ||\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#EEF0F9\"},children:\"        (\"}),e(r.span,{style:{color:\"#4BF3C8\"},children:\"__COMPAT__\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\" &&\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#00DAEF\"},children:\"          isArray\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),e(r.span,{style:{color:\"#4BF3C8\"},children:\"newValue\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\") &&\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#00DAEF\"},children:\"          isCompatEnabled\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),e(r.span,{style:{color:\"#4BF3C8\"},children:\"DeprecationTypes\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\".\"}),e(r.span,{style:{color:\"#ACAFFF\"},children:\"WATCH_ARRAY\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\", \"}),e(r.span,{style:{color:\"#4BF3C8\"},children:\"instance\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\"))\"})]}),\"\\n\",e(r.span,{\"data-line\":\"\",children:e(r.span,{style:{color:\"#EEF0F9\"},children:\"      ) {\"})}),\"\\n\",e(r.span,{\"data-line\":\"\",children:e(r.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"        // cleanup before running cb again\"})}),\"\\n\",e(r.span,{\"data-line\":\"\",children:e(r.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"        // 当回调再次执行前先清除副作用\"})}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#54B9FF\"},children:\"        if\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\" (\"}),e(r.span,{style:{color:\"#4BF3C8\"},children:\"cleanup\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\") {\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#00DAEF\"},children:\"          cleanup\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\"()\"})]}),\"\\n\",e(r.span,{\"data-line\":\"\",children:e(r.span,{style:{color:\"#EEF0F9\"},children:\"        }\"})}),\"\\n\",e(r.span,{\"data-line\":\"\",children:e(r.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"        // 触发 watch api 的回调，并将 newValue、oldValue、onInvalidate 传入\"})}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#00DAEF\"},children:\"        callWithAsyncErrorHandling\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),e(r.span,{style:{color:\"#4BF3C8\"},children:\"cb\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\", \"}),e(r.span,{style:{color:\"#4BF3C8\"},children:\"instance\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\", \"}),e(r.span,{style:{color:\"#4BF3C8\"},children:\"ErrorCodes\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\".\"}),e(r.span,{style:{color:\"#ACAFFF\"},children:\"WATCH_CALLBACK\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\", [\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#4BF3C8\"},children:\"          newValue\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\",\"})]}),\"\\n\",e(r.span,{\"data-line\":\"\",children:e(r.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"          // pass undefined as the old value when it's changed for the first time\"})}),\"\\n\",e(r.span,{\"data-line\":\"\",children:e(r.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"          // 首次调用时，将 oldValue 的值设置为 undefined\"})}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#4BF3C8\"},children:\"          oldValue\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\" === \"}),e(r.span,{style:{color:\"#ACAFFF\"},children:\"INITIAL_WATCHER_VALUE\"}),e(r.span,{style:{color:\"#54B9FF\"},children:\" ?\"}),e(r.span,{style:{color:\"#FFD493\"},children:\" undefined\"}),e(r.span,{style:{color:\"#54B9FF\"},children:\" :\"}),e(r.span,{style:{color:\"#4BF3C8\"},children:\" oldValue\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\",\"})]}),\"\\n\",e(r.span,{\"data-line\":\"\",children:e(r.span,{style:{color:\"#4BF3C8\"},children:\"          onInvalidate\"})}),\"\\n\",e(r.span,{\"data-line\":\"\",children:e(r.span,{style:{color:\"#EEF0F9\"},children:\"        ])\"})}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#4BF3C8\"},children:\"        oldValue\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),e(r.span,{style:{color:\"#4BF3C8\"},children:\"newValue\"}),e(r.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\" // 引用相同的罪魁祸首，当每次回调执行完走到着，会让oldValue和newValue保持相同的引用。\"})]}),\"\\n\",e(r.span,{\"data-line\":\"\",children:e(r.span,{style:{color:\"#EEF0F9\"},children:\"      }\"})}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#EEF0F9\"},children:\"    } \"}),e(r.span,{style:{color:\"#54B9FF\"},children:\"else\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\" {\"})]}),\"\\n\",n(r.span,{\"data-line\":\"\",children:[e(r.span,{style:{color:\"#4BF3C8\"},children:\"      effect\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\".\"}),e(r.span,{style:{color:\"#00DAEF\"},children:\"run\"}),e(r.span,{style:{color:\"#EEF0F9\"},children:\"()\"})]}),\"\\n\",e(r.span,{\"data-line\":\"\",children:e(r.span,{style:{color:\"#EEF0F9\"},children:\"    }\"})}),\"\\n\",e(r.span,{\"data-line\":\"\",children:e(r.span,{style:{color:\"#EEF0F9\"},children:\"  }\"})}),\"\\n\",e(r.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(r.span,{\"data-line\":\"\",children:\" \"})]})})}),\"\\n\",e(r.p,{children:e(r.img,{src:\"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/032465d961f640ea92e8c8b8e30c21a6~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?\",alt:\"image.png\"})}),\"\\n\",n(r.h1,{id:\"总结\",children:[e(r.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#总结\",children:e(r.span,{className:\"icon icon-link\"})}),\"总结\"]}),\"\\n\",n(r.p,{children:[\"这几天一直在修前面\",e(r.code,{children:\"react\"}),\"的源码解析，主要是我注意到了在\",e(r.code,{children:\"react\"}),\"源码理解的最大难点是在于复杂的数据结构，和各种指针链表的引用，但刚才看了一下\",e(r.code,{children:\"v3\"}),\"的\",e(r.code,{children:\"effect\"}),\"和调度，感觉比\",e(r.code,{children:\"react\"}),\"确实要好理解一些。\"]})]})}return{default:function(l={}){const{wrapper:n}=l.components||{};return n?e(n,{...l,children:e(_createMdxContent,{...l})}):_createMdxContent(l)}};",
    "toc": {
      "content": [
        {
          "title": "前端vue实战小测试",
          "url": "#前端vue实战小测试",
          "items": [
            {
              "title": "问题1",
              "url": "#问题1",
              "items": []
            },
            {
              "title": "问题2",
              "url": "#问题2",
              "items": []
            }
          ]
        },
        {
          "title": "总结",
          "url": "#总结",
          "items": []
        }
      ],
      "visible": true
    },
    "slugAsParams": "4.vue_actualc_ombat"
  }
]