# Nuxt3还能用吗？

前一段时间，我完成了整个产品，从Nuxt到Next的迁移，因为面临了一些在框架层面就无法解决的问题。

## payload json化

在所有的的Nuxt中，我们都能看到有这样一个东西。

![issue-a](https://ik.imagekit.io/ixou4q6nu/nuxt-issue1.png)

其实有这个东西也很正常，在Next中也会把服务端渲染的数据挂载html保持数据同步，这就是一个水合的必要步骤。在Next中是这样的。

![issue](https://ik.imagekit.io/ixou4q6nu/nuxt-issue2.png)
可以看到在Next新一点的版本中是压缩过的字符串（老版本Page Router,也是JSON格式），而在Nuxt中采用的是JSON格式.

### 为什么Nuxt要采用JSON？有什么好处？会面临什么问题？

**好处**:

其实很好理解，就是为了性能和水合的加速，我的直觉因为是因为V8的性能加速对于JSON格式，[V8参考资料](https://v8.dev/blog/cost-of-javascript-2019#json)。所以它不做压缩。

![issue](https://ik.imagekit.io/ixou4q6nu/nuxt-issue3.png)
**问题：违背SSR原则**

这其实有点不符合SSR的设计原则，本身来说SSR是要在更快的时间看到页面和加载完成，这种设计会让整个html document的文件大小大量的增加。假设项目有18n文件，或者首屏的请求接口非常的多在服务端完成，就会导致拉长整个接口时间。

在本身现代浏览器如此之快的背景下，去加快水合时间，而拖慢请求完成的时间，确实让我非常的不理解。

## 安全问题

我靠，你敢相信吗，这么大一个框架，在一定情况下，会把NUXT_PUBLIC公开的环境变量直接挂在html里（如果用到了环境变量），人都要晕了。

![issue](https://ik.imagekit.io/ixou4q6nu/nuxt-issue4.png)

可以参考这个issue：https://github.com/nuxt/nuxt/issues/2033
这个问题从2017年已经到2024年了。

## 生态问题

不可否认的是，整个生态是欣欣向荣的，但在一些更商业和大型库生态在我看来Nuxt是不够深入的（就是Nuxt有非常多高级的语法糖和渲染方式和写法、社区在遇到更具体问题的时候解法很少），反之整个生态的方向都导向了工具、组件库、提效、性能类似的方向，让我感觉很迷茫有时候，就是大家都不做应用是把。

## 夸一下

毫无疑问，Nuxt框架在不考虑上述这些因素的情况下，在纯前端层面上的性能、语法便捷度、用户体验（框架基础）上绝对都是大于Next的，它也是可以用的。

欢迎加入[群聊](https://bento.me/xibaoyu)，我们一起讨论一些更有趣的技术、商业、闲聊。
